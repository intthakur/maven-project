node {
  stage ('SCM checkout'){
    git 'https://github.com/intthakur/maven-project.git'
  }
  stage ('package stage'){
    sh label: '', script: 'mvn clean package'
  }
  stage ('docker image build'){
    sh 'docker build -t intthakur/prakash-app:1.0.0 .'
  }
  stage ('Push Docker image to DockerHub') {
    withCredentials([string(credentialsId: 'dockerHubAccount', variable: 'dockerHubAccount')]) {
    sh "docker login -u intthakur -p ${dockerHubAccount}"
    }
    sh 'docker push intthakur/prakash-app:1.0.0'
  }
}
